<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/jquery-3.6.0.min.js"></script>
    <title>p0_morning</title>
    <link rel="stylesheet" href="./css/system.css" />

    <script type="text/javascript">
        $(function(){
            $.getJSON("drugdata.json",display);
        });
        function display(drugdata){
            $("#p0_name").html(drugdata[0].name);
            $("#p0morning_dn0").html(drugdata[0].morning.drugname[0])
            $("#p0morning_dn1").html(drugdata[0].morning.drugname[1])
            $("#p0morning_dn2").html(drugdata[0].morning.drugname[2])
            $("#p0morning_dn3").html(drugdata[0].morning.drugname[3])
            $("#p0morning_dn4").html(drugdata[0].morning.drugname[4])
            $("#p0morning_p").html(
                drugdata[0].morning.drugname[0]+"："+drugdata[0].morning.purpose[0]+"<br>"+
                drugdata[0].morning.drugname[1]+"："+drugdata[0].morning.purpose[1]+"<br>"+
                drugdata[0].morning.drugname[2]+"："+drugdata[0].morning.purpose[2]+"<br>"+
                drugdata[0].morning.drugname[3]+"："+drugdata[0].morning.purpose[3]+"<br>"+
                drugdata[0].morning.drugname[4]+"："+drugdata[0].morning.purpose[4]
            )
            $("#p0morning_t").html(drugdata[0].morning.time)
        }

        $(function(){
            $("#check").click(function(){
                $.getJSON("drugdata.json",check1);
            });
        });
        function check1(drugdata){
            var DD0,DD1,DD2,DD3,DD4;
            DD0 = drugdata[0].morning.drugdose[0];
            DD1 = drugdata[0].morning.drugdose[1];
            DD2 = drugdata[0].morning.drugdose[2];
            DD3 = drugdata[0].morning.drugdose[3];
            DD4 = drugdata[0].morning.drugdose[4];
            if(document.form1.drugdose0.value==DD0 && document.form1.drugdose1.value==DD1 && document.form1.drugdose2.value==DD2 && document.form1.drugdose3.value==DD3 && document.form1.drugdose4.value==DD4){
                Right = confirm("正しく確認できています。\n患者ページでQRを読み込んでください。");
                if(Right == true){
                    location.href="patient0.html";
                }else{
                    alert("キャンセルされました。");
                }
            }else{
                Wrong = confirm("入力内容が間違っています！\n与薬情報閲覧画面から再確認してください。");
                if(Wrong == true){
                    location.href="p0_morning.html";
                }else{
                    alert("キャンセルされました。")
                }
            }
        }
        function pageback(){
            location.href="p0_morning.html";
        }
    </script>
</head>
<body>
    <div class="container">
        <header>
            <p class="title">与薬情報システム</p>
        </header>
        
    <div class="main">
    <br>
    <form name="form1">
    <table border="1">
        <caption>与薬情報</caption>
        <tr>
            <th colspan="2">氏名</th>
        </tr>
        <tr>
            <td colspan="2" id="p0_name"></td>
        </tr>
        <tr>
            <th>処方薬</th><th>用量</th>
        </tr>
        <tr>
            <td colspan="2"><p><font color="red">投与薬剤の用量のみ入力して下さい</font></p></td>
        </tr>
        <tr>
            <td id="p0morning_dn0"></td><td><input type="text" id="drugdose0" placeholder="用量を入力してください" inputmode="numeric" pattern="\d*"></td>
        </tr>
        <tr>
            <td id="p0morning_dn1"></td><td><input type="text" id="drugdose1" placeholder="用量を入力してください" inputmode="numeric" pattern="\d*"></td>
        </tr>
        <tr>
            <td id="p0morning_dn2"></td><td><input type="text" id="drugdose2" placeholder="用量を入力してください" inputmode="numeric" pattern="\d*"></td>
        </tr> 
        <tr>
            <td id="p0morning_dn3"></td><td><input type="text" id="drugdose3" placeholder="用量を入力してください" inputmode="numeric" pattern="\d*"></td>
        </tr>
        <tr>
            <td id="p0morning_dn4"></td><td><input type="text" id="drugdose4" placeholder="用量を入力してください" inputmode="numeric" pattern="\d*"></td>
        </tr>
        <tr>
            <th colspan="2">使用目的</th>
        </tr>
        <tr>
            <td colspan="2" id="p0morning_p"></td>
        </tr>
        <tr>
            <th colspan="2">投与時刻</th>
        </tr>
        <tr>
            <td colspan="2" id="p0morning_t"></td>
        </tr>
        <tr>
            <td colspan="2"><input type="button" value="確認する" id="check"></td>
        </tr>
    </table><br>
    </form>
    </div>

    <footer>
        <button onclick="pageback()">戻る</button>
    </footer>
    
    </div>
</body>
</html>